
<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Formul√°≈ô - Smlouva Plyn (Dom√°cnost)</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
  <div class="container py-5">
    <h2 class="mb-4">üìÑ Formul√°≈ô: Rekapitulace smlouvy - Plyn (Dom√°cnost)</h2>
    <form id="gasForm">
      <div class="mb-3">
        <label class="form-label">ƒå√≠slo smlouvy</label>
        <input type="text" class="form-control" name="cislo_smlouvy" required>
      </div>
      <div class="mb-3">
        <label class="form-label">ƒå√≠slo obchodn√≠ho partnera</label>
        <input type="text" class="form-control" name="cislo_partnera" required>
      </div>
      <div class="row mb-3">
        <div class="col">
          <label class="form-label">Jm√©no</label>
          <input type="text" class="form-control" name="jmeno" required>
        </div>
        <div class="col">
          <label class="form-label">P≈ô√≠jmen√≠</label>
          <input type="text" class="form-control" name="prijmeni" required>
        </div>
      </div>
      <div class="mb-3">
        <label class="form-label">Datum narozen√≠</label>
        <input type="text" class="form-control" name="datum_narozeni" placeholder="DD.MM.RRRR" pattern="\d{2}\.\d{2}\.\d{4}" required>
      </div>
      <div class="mb-3">
        <label class="form-label">Adresa trval√©ho bydli≈°tƒõ</label>
        <input type="text" class="form-control" name="ulice_trvala" placeholder="Ulice a ƒç.p." required>
        <input type="text" class="form-control mt-2" name="mesto_trvala" placeholder="Mƒõsto" required>
        <input type="text" class="form-control mt-2" name="psc_trvala" placeholder="PSƒå" required>
      </div>
      <div class="row mb-3">
        <div class="col">
          <label class="form-label">E-mail</label>
          <input type="email" class="form-control" name="email" required>
        </div>
        <div class="col">
          <label class="form-label">Telefon</label>
          <input type="tel" class="form-control" name="telefon" required>
        </div>
      </div>
      <div class="mb-3">
        <label class="form-label">Zp≈Øsob odes√≠l√°n√≠ faktur a p≈ô√≠pisu z√°loh</label>
        <select class="form-select" name="zpusob_odesilani" required>
          <option value="">-- Vyberte mo≈ænost --</option>
          <option value="E-mailem">E-mailem</option>
          <option value="Po≈°tou">Po≈°tou</option>
          <option value="Datovou schr√°nkou">Datovou schr√°nkou</option>
        </select>
      </div>
      <div class="row mb-3">
        <div class="col">
          <label class="form-label">Platba ‚Äì Faktury</label>
          <select class="form-select" name="platby_faktury" required>
            <option value="">-- Vyberte mo≈ænost --</option>
            <option value="P≈ôevodem">P≈ôevodem</option>
            <option value="Inkaso">Inkaso</option>
            <option value="SIPO">SIPO</option>
          </select>
        </div>
        <div class="col">
          <label class="form-label">Platba ‚Äì Z√°lohy</label>
          <select class="form-select" name="platby_zalohy" required>
            <option value="">-- Vyberte mo≈ænost --</option>
            <option value="P≈ôevodem">P≈ôevodem</option>
            <option value="Inkaso">Inkaso</option>
            <option value="SIPO">SIPO</option>
          </select>
        </div>
      </div>
      <div class="mb-3">
        <label class="form-label">ƒå√≠slo √∫ƒçtu</label>
        <input type="text" class="form-control" name="cislo_uctu" required>
      </div>
      <div class="row mb-3">
        <div class="col">
          <label class="form-label">Term√≠n zah√°jen√≠ dod√°vek</label>
          <input type="text" class="form-control" name="zahajeni_dodavek" placeholder="DD.MM.RRRR" pattern="\d{2}\.\d{2}\.\d{4}" required>
        </div>
        <div class="col">
          <label class="form-label">Datum prolongace smlouvy</label>
          <input type="text" class="form-control" name="prolongace" placeholder="DD.MM.RRRR" pattern="\d{2}\.\d{2}\.\d{4}" required>
        </div>
      </div>
      <div class="mb-3">
        <label class="form-label">EIC</label>
        <input type="text" class="form-control" name="ean" required>
      </div>
      <div class="mb-3">
        <label class="form-label">Adresa odbƒõru</label>
        <input type="text" class="form-control" name="ulice_odber" placeholder="Ulice a ƒç.p." required>
        <input type="text" class="form-control mt-2" name="mesto_odber" placeholder="Mƒõsto" required>
        <input type="text" class="form-control mt-2" name="psc_odber" placeholder="PSƒå" required>
      </div>
      <button type="submit" class="btn btn-success">Vygenerovat smlouvu</button>
    </form>
  </div>
  <script>
    document.getElementById("gasForm").addEventListener("submit", async function (e) {
      e.preventDefault();
      const formData = new FormData(this);
      const jsonData = {};
      formData.forEach((value, key) => jsonData[key] = value);

      const response = await fetch("https://generator-smluv-plyn-dom.onrender.com/api/generate", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify(jsonData)
      });

      if (!response.ok) {
        alert("‚ùå Chyba p≈ôi generov√°n√≠ dokumentu");
        return;
      }
      const blob = await response.blob();
      const url = URL.createObjectURL(blob);
      const link = document.createElement("a");
      link.href = url;
      link.download = "smlouva_plyn.docx";
      document.body.appendChild(link);
      link.click();
      link.remove();
    });
  </script>
</body>
</html>
